<Controls:MetroWindow x:Class="AviUtlAutoInstaller.Views.MainView"
                      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                      xmlns:Controls="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro"
                      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                      xmlns:vw="clr-namespace:AviUtlAutoInstaller.Views"
                      xmlns:b="clr-namespace:AviUtlAutoInstaller.Views.Behaviors"
                      mc:Ignorable="d"
                      WindowTitleBrush="#FF333337"
                      NonActiveWindowTitleBrush="#FF333337"
                      Background="#FF333337"
                      GlowBrush="MediumAquamarine"
                      TitleCharacterCasing="Normal"
                      Title="AviUtlAutoInstaller"
                      ResizeMode="NoResize"
                      SizeToContent="Height"
                      Height="Auto" Width="512"
                      WindowStartupLocation="CenterScreen"
                      WindowTransitionsEnabled="False"
                      b:WindowClosingBehavior.Callback="{Binding ClosingCallback}">
    <Controls:MetroWindow.RightWindowCommands>
        <Controls:WindowCommands>
            <Grid Margin="0,0,4,0"
                  ToolTip="寄付する">
                <Path Data="M11.79927,6.3695769 C11.649911,6.3650885 11.515916,6.4221606 11.397284,6.5407934 11.178267,6.759809 11.029162,7.0213561 10.949965,7.3254347 10.870768,7.6295152 10.873662,7.9335542 10.958647,8.2375536 L12.024041,11.94938 C12.030119,11.955459 12.027075,11.964581 12.014907,11.976748 12.008823,11.982832 12.002743,11.982835 11.996664,11.976757 L8.303072,10.929596 C7.9929943,10.838532 7.6828752,10.832602 7.3727145,10.911801 7.0625553,10.991002 6.7918839,11.146193 6.5607014,11.377376 6.4025235,11.535553 6.3537869,11.724083 6.4144893,11.942962 6.4751925,12.161843 6.6180258,12.298593 6.842989,12.35321 L10.992679,13.327182 C11.02308,13.333248 11.044353,13.35148 11.056501,13.381879 11.068648,13.412277 11.062554,13.439644 11.038218,13.46398 L10.134782,14.367416 C10.031358,14.47084 9.9811306,14.59704 9.9840994,14.746019 9.9870682,14.894999 10.040215,15.02115 10.143538,15.124474 10.246862,15.227798 10.371494,15.279425 10.517433,15.279354 10.663374,15.279284 10.788055,15.227537 10.891479,15.124113 L12.232945,13.782646 C12.263365,13.752228 12.302896,13.737006 12.351544,13.736983 12.40019,13.736959 12.436669,13.749104 12.46098,13.773415 L12.916823,14.229257 C12.947212,14.259646 12.960876,14.297645 12.957813,14.343252 12.954751,14.38886 12.941052,14.423832 12.916718,14.448166 L11.566125,15.798759 C11.462701,15.902183 11.410954,16.026863 11.410884,16.172804 11.410813,16.318745 11.46244,16.443377 11.565763,16.5467 11.669088,16.650023 11.795239,16.703169 11.944219,16.706139 12.093197,16.709108 12.219398,16.65888 12.322822,16.555456 L13.673414,15.204863 C13.746419,15.131858 13.816351,15.128785 13.883207,15.195641 L14.311698,15.624131 C14.494035,15.806469 14.712901,15.897576 14.968295,15.897453 15.22369,15.89733 15.442643,15.806012 15.625155,15.6235 15.807669,15.440987 15.898986,15.222034 15.899109,14.966639 15.899232,14.711245 15.808125,14.492379 15.625788,14.310041 L15.197297,13.881551 C15.130441,13.814694 15.133514,13.744763 15.206519,13.671758 L16.557112,12.321165 C16.660536,12.217741 16.710764,12.091541 16.707796,11.942562 16.704826,11.793583 16.651678,11.667432 16.548355,11.564107 16.445032,11.460785 16.3204,11.409158 16.174461,11.409227 16.028519,11.409298 15.903839,11.461044 15.800416,11.564468 L14.449822,12.915061 C14.425488,12.939397 14.390516,12.953094 14.344909,12.956157 14.2993,12.959219 14.261303,12.945557 14.230913,12.915167 L13.77507,12.459325 C13.744681,12.428935 13.731019,12.390937 13.734081,12.345329 13.737144,12.299722 13.753884,12.261709 13.784302,12.231289 L15.12577,10.889822 C15.229194,10.786399 15.28094,10.661718 15.281011,10.515778 15.28108,10.369838 15.229453,10.245207 15.12613,10.141882 15.022805,10.038559 14.896654,9.9854116 14.747676,9.9824429 14.598697,9.9794741 14.472496,10.029702 14.369073,10.133125 L13.465635,11.036563 C13.4413,11.060898 13.413934,11.066992 13.383536,11.054845 13.353137,11.042697 13.334905,11.021423 13.328838,10.991021 L12.354885,6.8048482 C12.30026,6.5920458 12.166548,6.4552922 11.953749,6.3945861 11.900549,6.3794098 11.849055,6.3710732 11.79927,6.3695769 z M14.02131,0 C17.271658,0 19.916199,2.780304 19.998047,6.2432785 L20,20 6.2404051,19.998047 C2.7790241,19.916164 0,17.270491 0,14.018756 0,10.76702 2.7790241,8.1213484 6.2404051,8.039464 L8.0426197,8.0375109 8.0445719,6.2432785 C8.126421,2.780304 10.770964,0 14.02131,0 z"
                      Fill="#FFEC4380"
                      RenderTransformOrigin="0.5,0.5" Stretch="Fill" Width="24" Height="24">
                    <Path.RenderTransform>
                        <TransformGroup>
                            <RotateTransform Angle="45"/>
                            <TranslateTransform X="-4" Y="-4"/>
                        </TransformGroup>
                    </Path.RenderTransform>
                </Path>
                <Path Data="M2.832,4.6799994 C3.1359999,4.6799994 3.4159999,4.7559996 3.6719999,4.907999 C3.928,5.0599995 4.1280003,5.2679996 4.2719998,5.5319996 L6.0120001,8.6519995 C6.0120001,8.6599998 6.0159998,8.6639996 6.0240002,8.6639996 C6.04,8.6639996 6.0479994,8.6599998 6.0479999,8.6519995 L7.7880001,5.5079994 C7.9319997,5.2519999 8.1299992,5.0500002 8.382,4.9019995 C8.6339998,4.7539997 8.9039993,4.6799994 9.1920004,4.6799994 C9.3999996,4.6799994 9.5539999,4.7699995 9.6540003,4.9499998 C9.7539997,5.1300001 9.7519999,5.3079996 9.6479998,5.4839997 L7.5360003,8.8799992 C7.52,8.9039993 7.5180001,8.9299994 7.5300002,8.9580002 C7.5419998,8.9860001 7.5639997,9 7.5960002,9 L8.7840004,9 C8.9200001,9 9.0359993,9.0499992 9.132,9.1499996 C9.2279997,9.25 9.2759991,9.368 9.276,9.5039997 C9.2759991,9.6399994 9.2279997,9.7559996 9.132,9.8519993 C9.0359993,9.948 8.9200001,9.9960003 8.7840004,9.9959993 L7.02,9.9959993 C6.98,9.9960003 6.9440002,10.01 6.9120002,10.038 C6.8800001,10.066 6.8639998,10.099999 6.8639998,10.139999 L6.8639998,10.74 C6.8639998,10.78 6.8800001,10.813999 6.9120002,10.841999 C6.9440002,10.87 6.9759998,10.884 7.0079999,10.884 L8.7840004,10.884 C8.9200001,10.884 9.0359993,10.931999 9.132,11.028 C9.2279997,11.124 9.2759991,11.24 9.276,11.375999 C9.2759991,11.511999 9.2279997,11.629999 9.132,11.73 C9.0359993,11.83 8.9200001,11.879999 8.7840004,11.879999 L7.0079999,11.879999 C6.9119997,11.879999 6.8639998,11.924 6.8639998,12.011999 L6.8639998,12.575999 C6.8639998,12.816 6.7799997,13.02 6.612,13.188 C6.4439998,13.356 6.2399998,13.44 6,13.44 C5.7599998,13.44 5.5559998,13.356 5.388,13.188 C5.2199998,13.02 5.1359997,12.816 5.1360002,12.575999 L5.1360002,12.011999 C5.1359997,11.924 5.0879998,11.879999 4.9920001,11.879999 L3.2160001,11.879999 C3.0799999,11.879999 2.964,11.83 2.868,11.73 C2.7719998,11.629999 2.724,11.511999 2.724,11.375999 C2.724,11.24 2.7719998,11.124 2.868,11.028 C2.964,10.931999 3.0799999,10.884 3.2160001,10.884 L4.9920001,10.884 C5.0239997,10.884 5.0559998,10.87 5.0879998,10.841999 C5.1199999,10.813999 5.1359997,10.78 5.1360002,10.74 L5.1360002,10.139999 C5.1359997,10.108 5.1199999,10.076 5.0879998,10.044 C5.0559998,10.011999 5.0199995,9.9960003 4.98,9.9959993 L3.2160001,9.9959993 C3.0799999,9.9960003 2.964,9.948 2.868,9.8519993 C2.7719998,9.7559996 2.724,9.6399994 2.724,9.5039997 C2.724,9.368 2.7719998,9.25 2.868,9.1499996 C2.964,9.0499992 3.0799999,9 3.2160001,9 L4.4039998,9 C4.4359999,9 4.4580002,8.9860001 4.4700003,8.9580002 C4.4819999,8.9299994 4.48,8.9039993 4.4640002,8.8799992 L2.3759999,5.5079994 C2.2639999,5.3240004 2.26,5.1400003 2.3640001,4.9559994 C2.4679999,4.7720003 2.6239998,4.6799994 2.832,4.6799994 z"
                      Fill="#01FFFFFF"
                      RenderTransformOrigin="0.5,0.5" Stretch="Fill" Width="9.612" Height="11.283">
                    <Path.RenderTransform>
                        <TransformGroup>
                            <TranslateTransform X="-4" Y="-0.1"/>
                        </TransformGroup>
                    </Path.RenderTransform>
                </Path>
            </Grid>
        </Controls:WindowCommands>
    </Controls:MetroWindow.RightWindowCommands>
    <Window.InputBindings>
        <KeyBinding Gesture="Ctrl+O" Command="{Binding OpenDialogInstallSettingFileCommand}"/>
        <KeyBinding Gesture="Ctrl+Shift+O" Command="{Binding OpenDialogUserRepoFileCommand}"/>
    </Window.InputBindings>
    <DockPanel>
        <!-- #region Menu Bar -->
        <Menu DockPanel.Dock="Top"
              Background="#FF333337"
              FontSize="12">
            <MenuItem Header="ファイル(_F)"
                      Background="#FF333337">
                <MenuItem Header="開く(_O)"
                          IsEnabled="{Binding IsFileOpenMenuEnable}">
                    <MenuItem Header="インストール設定ファイル(_I)..."
                              InputGestureText="Ctrl+O"
                              Command="{Binding OpenDialogInstallSettingFileCommand}"
                              b:FileDialogBehavior.Callback="{Binding OpenDialogInstallSettingFileCallback}"
                              b:FileDialogBehavior.Title="インストール設定ファイルを開く"
                              b:FileDialogBehavior.Filter="設定ファイル (*.profile)|*.profile|すべてのファイル (*.*)|*.*"
                              b:FileDialogBehavior.Multiselect="False"
                              b:FileDialogBehavior.OpenSave="Open"/>
                    <MenuItem Header="ユーザーリポジトリファイル(_U)..."
                              InputGestureText="Ctrl+Shift+O"
                              Command="{Binding OpenDialogUserRepoFileCommand}"
                              b:FileDialogBehavior.Callback="{Binding OpenDialogUserRepoFileCallback}"
                              b:FileDialogBehavior.Title="ユーザーリポジトリファイルを開く"
                              b:FileDialogBehavior.Filter="リポジトリファイル (*.urepo)|*.urepo|すべてのファイル (*.*)|*.*"
                              b:FileDialogBehavior.Multiselect="False"
                              b:FileDialogBehavior.OpenSave="Open"/>
                </MenuItem>
                <Separator/>
                <MenuItem Header="終了(_X)"
                          InputGestureText="Alt+F4"
                          Command="{Binding ExitCommand}"/>
            </MenuItem>
            <MenuItem Header="インストール項目一覧の編集(_E)..."
                      Background="#FF333337"
                      IsEnabled="{Binding IsInstallEditManuEnable}"
                      Command="{Binding InstallEditCommand}"/>
            <MenuItem Header="ヘルプ(_H)"
                      Background="#FF333337">
                <MenuItem Header="更新を確認(_U)"
                          IsEnabled="{Binding IsUpdateCheckManuEnable}"
                          Command="{Binding UpdateCheckCommand}"/>
                <MenuItem Header="バージョン情報(_A)"
                          Command="{Binding AboutCommand}"/>
            </MenuItem>
        </Menu>
        <!-- #endregion -->

        <!-- #region Items -->
        <Grid Margin="4">
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition Width="52"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="24"/>
                <RowDefinition Height="32"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="40"/>
            </Grid.RowDefinitions>

            <!-- #region InstallSetting -->
            <TextBlock Grid.Column="0" Grid.Row="0"
                       Text="インストール先を選択してください"
                       Padding="0,4,0,4"/>
            <TextBox Grid.Column="0" Grid.Row="1"
                     VerticalAlignment="Center"
                     IsReadOnly="True"
                     ToolTip="{Binding InstallDirPath, Mode=OneWay}"
                     Text="{Binding InstallDirPath, Mode=OneWay}">
            </TextBox>
            <Button Grid.Column="1" Grid.Row="1"
                    Style="{DynamicResource MahApps.Styles.Button.Square}"
                    IsEnabled="{Binding IsSelectInstallDirEnable}"
                    BorderThickness="0.8"
                    Height="26" Width="48"
                    Content="..."
                    Command="{Binding SelectInstallDir}"
                    b:FileDialogBehavior.Callback="{Binding FolderDialogSelectInstallDirCallback}"
                    b:FileDialogBehavior.Title="インストール先を選択してください"
                    b:FileDialogBehavior.OpenSave="Folder"/>
            <!-- #endregion -->

            <StackPanel Grid.Column="0" Grid.Row="2" Grid.ColumnSpan="2">
                <Controls:ToggleSwitch Padding="0,8,0,0"
                                       Header="AviUtlやプラグインの圧縮ファイルをインストール先にバックアップ"
                                       IsEnabled="{Binding IsCopyBackupEnable}"
                                       OnContent="する"
                                       OffContent="しない"
                                       IsOn="{Binding IsCopyBackupFiles, Mode=OneWayToSource}"/>
                <Controls:ToggleSwitch Padding="0,8,0,0"
                                       Header="AviUtlへのショートカットを作成"
                                       IsEnabled="{Binding IsMakeShortcutEnable}"
                                       OnContent="する"
                                       OffContent="しない"
                                       IsOn="{Binding IsMakeShortcut, Mode=OneWayToSource}"/>


                <!-- #region Progress -->
                <StackPanel Visibility="{Binding ProgressVisiblity, UpdateSourceTrigger=PropertyChanged}">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <Controls:ProgressRing Foreground="DeepSkyBlue"
                                                   IsActive="True"
                                                   Height="8" Width="8"/>
                            <TextBlock Padding="4,0,0,0">
                                <TextBlock.Text>
                                    <MultiBinding StringFormat="{}{0} ({1}/{2})">
                                        <Binding Path="StateName" UpdateSourceTrigger="PropertyChanged"/>
                                        <Binding Path="StateItemNow" UpdateSourceTrigger="PropertyChanged"/>
                                        <Binding Path="StateItemMax" UpdateSourceTrigger="PropertyChanged"/>
                                    </MultiBinding>
                                </TextBlock.Text>
                            </TextBlock>
                        </StackPanel>

                        <Controls:MetroProgressBar Foreground="DeepSkyBlue"
                                                   Padding="0,4,0,0"
                                                   Height="12"
                                                   Minimum="0"
                                                   Maximum="{Binding StateItemMax, Mode=OneWay}"
                                                   Value="{Binding StateItemNow, Mode=OneWay}"/>
                    </StackPanel>
                    <StackPanel Visibility="{Binding DownloadVisiblity, UpdateSourceTrigger=PropertyChanged}">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Padding="4,8,0,0">
                                <TextBlock.Text>
                                    <MultiBinding StringFormat="{}{0} ({1}/{2})">
                                        <Binding Path="DownloadFileName" UpdateSourceTrigger="PropertyChanged"/>
                                        <Binding Path="DownloadSizeNow" UpdateSourceTrigger="PropertyChanged"/>
                                        <Binding Path="DownloadSizeMax" UpdateSourceTrigger="PropertyChanged"/>
                                    </MultiBinding>
                                </TextBlock.Text>
                            </TextBlock>
                        </StackPanel>

                        <Controls:MetroProgressBar Foreground="DeepSkyBlue"
                                                   Padding="0,4,0,0"
                                                   Height="12"
                                                   Minimum="0"
                                                   Maximum="{Binding DownloadSizeMax, Mode=OneWay}"
                                                   Value="{Binding DownloadSizeNow, Mode=OneWay}"/>
                    </StackPanel>
                </StackPanel>
                <!--#endregion -->
            </StackPanel>

            <!-- #region ControlButton -->
            <StackPanel Grid.Column="0" Grid.Row="3" Grid.ColumnSpan="2"
                        Orientation="Horizontal"
                        HorizontalAlignment="Right">
                <Button BorderThickness="0.8"
                        HorizontalAlignment="Right"
                        Style="{DynamicResource MahApps.Styles.Button.Square}"
                        Height="26" Width="80"
                        Margin="4"
                        Content="インストール"
                        IsEnabled="{Binding IsInstallButtonEnable}"
                        Command="{Binding InstallStartCommand}"/>
            </StackPanel>
            <!-- #endregion -->
        </Grid>
        <!-- #endregion -->
    </DockPanel>
</Controls:MetroWindow>
